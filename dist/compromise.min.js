/**
 * @license
 * compromise 0.1.1 https://github.com/jnewman/compromise/blob/master/LICENSE.txt
 * Build time: 2013-07-23A09:07:02
 */
;!function(a,b){"function"==typeof define&&define.amd?define(["underscore","q"],b):"object"==typeof exports?module.exports=b(require("underscore"),require("q")):window.compromise=b(_,Q)}(this,function(a,b){"use strict";return function(c,d,e){var f=a.tail(arguments);return e=a.isBoolean(a.last(f))?f.pop():!1,function(){for(var d=a.map(f,function(d){return function(e){var f=b.defer(),g=function(b){b?f.reject(b):f.resolve(a.tail(arguments))},h=a.isFunction(d)?d:c[d];return h.apply(c,e.concat(g)),f.promise}}),g=0,h=d.length,i=[],j=null,k=null;h>g;++g)k=d[g],j=i[g]=j?j.then(k):k(a.toArray(arguments));return b.all(i).then(function(b){var c=a.last(b);return e?c:c[0]})}}});